<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:composite="http://java.sun.com/jsf/composite" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html">

<ui:composition template="../view/templates/pesquisaTemplate.xhtml">
	<ui:define name="content">
		<div id="pesquisaSeisForm" class="form-group">
			<h:form styleClass="form-horizontal" id="formPesquisaSeis">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h:outputText value="#{msg['pesquisaSeis.titulo']}" />
					</div>
					<div class="panel-body">
						<br />
						<h:panelGrid id="grid1" columns="3" style="margin: auto;">
							<!--  NOME -->
							<h:outputText value="#{msg['pesquisaSeis.paciente.nome']}:" />
							<h:inputText value="#{seisView.filtroSeis.nome}" styleClass="form-control" style="width:550px;" maxlength="80" />
							<br />
							<br />
							<!--  CODIGO -->
							<h:outputText value="#{msg['pesquisaSeis.codigo']}:&nbsp;" />
							<h:inputText value="#{seisView.filtroSeis.codigo}" styleClass="form-control" maxlength="20" />
							<br />
							<br />
							<!--  NIP -->
							<h:outputText value="#{msg['pesquisaSeis.paciente.nip']}:" />
							<h:inputText value="#{seisView.filtroSeis.nip}" styleClass="form-control" maxlength="8" />
							<br />
							<br />
							<!-- UTILIZADO -->
							<h:outputText value="#{msg['pesquisaSeis.utilizado']}&nbsp;?&nbsp;" />
							<h:selectBooleanCheckbox value="#{seisView.filtroSeis.utilizado}" />
							<br />
							<br />
							<!-- CANCELADO -->
							<h:outputText value="#{msg['pesquisaSeis.cancelado']}&nbsp;?&nbsp;" />
							<h:selectBooleanCheckbox value="#{seisView.filtroSeis.cancelado}" />
							<br />
							<br />
						</h:panelGrid>
						<br />
						<p class="text-center">
							<h:commandButton value="#{msg['label.pesquisar']}" action="#{seisView.pesquisarSeis}" update="solicitacoes" styleClass="btn btn-default"
								title="A pesquisa deverá ser feita pelo NIP ou Nome do paciente!" />
							&nbsp;
							<h:commandButton value="#{msg['label.limpar']}" update="solicitacoes" styleClass="btn btn-default" type="reset"
								title="Limpa os campos de digitação: Nip e Nome." />
						</p>
						<h:dataTable id="solicitacoes" var="seis" value="#{seisView.solicitacoes}" rowClasses="linha" styleClass="table display">
							<!-- CODIGO -->
							<h:column>
								<f:facet name="header">
									<h:outputText value="#{msg['pesquisaSeis.codigo']}" />
								</f:facet>
								<h:commandLink action="#{seisView.visualizarSeis}">
									<f:setPropertyActionListener target="#{seisView.seis}" value="#{seis}" />
									<h:outputText value="#{seis.codigo}" />
								</h:commandLink>
							</h:column>
							<!-- NIP -->
							<h:column>
								<f:facet name="header">
									<h:outputText value="#{msg['pesquisaSeis.paciente.nip']}" />
								</f:facet>
								<h:outputText value="#{seis.dadosSolicitante.nip}" />
							</h:column>
							<!-- NOME -->
							<h:column>
								<f:facet name="header">
									<h:outputText value="#{msg['pesquisaSeis.paciente.nome']}" />
								</f:facet>
								<h:outputText value="#{seis.dadosSolicitante.nome}" />
							</h:column>
							<!-- DATA GERACAO -->
							<h:column>
								<f:facet name="header">
									<h:outputText value="#{msg['pesquisaSeis.dataGeracao']}" />
								</f:facet>
								<h:outputText value="#{seis.dataGeracaoString}" />
							</h:column>
							<!-- CANCELADO -->
							<h:column>
								<f:facet name="header">
									<h:outputText value="#{msg['pesquisaSeis.cancelado']}" />
								</f:facet>
								<h:outputText value="#{seis.canceladoString}" />
							</h:column>
							<!-- DATA CANCELAMENTO -->
							<h:column>
								<f:facet name="header">
									<h:outputText value="#{msg['pesquisaSeis.dataCancelamento']}" />
								</f:facet>
								<h:outputText value="#{seis.dataCancelamentoString}" />
							</h:column>
							<!-- UTILIZADO -->
							<h:column>
								<f:facet name="header">
									<h:outputText value="#{msg['pesquisaSeis.utilizado']}" />
								</f:facet>
								<h:outputText value="#{seis.utilizadoString}" />
							</h:column>
							<!-- INSPECAO -->
							<h:column>
								<f:facet name="header">
									<h:outputText value="#{msg['pesquisaSeis.inspecao']}" />
								</f:facet>
								<h:outputText value="#{seis.inspecao!=null?seis.inspecao.idInspecao:'-'}" />
							</h:column>
						</h:dataTable>
						<script type="text/javascript" charset="utf-8">
							var table;
							$(document).ready(function() {
								table = $('#formPesquisaSeis-solicitacoes').DataTable( {
							        stateSave: true
							    } );
							} );
						</script>
						<div style="text-align: center;">
							<input type="image" src="/images/xls-icon.png" alt="Exportar para excel"
								onclick="$('#formPesquisaSeis-solicitacoes').tableExport({type:'excel',escape:'false',tableName:'pesquisa'});" />
						</div>
					</div>
				</div>
			</h:form>
		</div>
	</ui:define>
</ui:composition>
</html>